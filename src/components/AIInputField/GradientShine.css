/* ============================================
   Gradient Shine — Spin & Trace modes
   CSS @property rotation techniques
   ============================================ */

@property --gradient-angle {
  syntax: "<angle>";
  initial-value: 0deg;
  inherits: false;
}

@keyframes rotate-gradient {
  from { --gradient-angle: 0deg; }
  to   { --gradient-angle: 360deg; }
}

/* ============================================
   SPIN MODE — full conic rainbow rotation
   ============================================ */

.glow-layer,
.border-layer {
  animation: rotate-gradient var(--shine-speed, 3s) linear infinite;
  animation-play-state: var(--shine-play-state, running);
}

.glow-layer {
  position: absolute;
  z-index: 0;
  inset: calc(-1 * var(--glow-spread, 15px));
  border-radius:
    calc(var(--_radius-tl) + var(--glow-spread, 15px))
    calc(var(--_radius-tr) + var(--glow-spread, 15px))
    calc(var(--_radius-br) + var(--glow-spread, 15px))
    calc(var(--_radius-bl) + var(--glow-spread, 15px));
  opacity: var(--glow-intensity, 0.4);
  filter: blur(var(--glow-blur, 20px));
  pointer-events: none;
  transition: opacity 0.3s ease, filter 0.3s ease;
  background: conic-gradient(
    from var(--gradient-angle),
    var(--color-1, #4285f4),
    var(--color-2, #9b72cb),
    var(--color-3, #d96570),
    var(--color-4, #4285f4)
  );
}

.border-layer {
  position: absolute;
  z-index: 1;
  inset: 0;
  border-radius: var(--_radius);
  border: var(--border-width, 2px) solid transparent;
  pointer-events: none;
  transition: border-width 0.3s ease;
  background:
    linear-gradient(var(--app-bg, #ffffff), var(--app-bg, #ffffff)) padding-box,
    conic-gradient(
      from var(--gradient-angle),
      var(--color-1, #4285f4),
      var(--color-2, #9b72cb),
      var(--color-3, #d96570),
      var(--color-4, #4285f4)
    ) border-box;
}

/* ============================================
   TRACE MODE — orbiting light beam
   A concentrated bright spot + fading tail
   traces the border path
   ============================================ */

.trace-glow-layer,
.trace-border-layer {
  animation: rotate-gradient var(--shine-speed, 3s) linear infinite;
  animation-play-state: var(--shine-play-state, running);
}

/* Trace glow — blurred beam spotlight following the border */
.trace-glow-layer {
  position: absolute;
  z-index: 0;
  inset: calc(-1 * var(--glow-spread, 15px));
  border-radius:
    calc(var(--_radius-tl) + var(--glow-spread, 15px))
    calc(var(--_radius-tr) + var(--glow-spread, 15px))
    calc(var(--_radius-br) + var(--glow-spread, 15px))
    calc(var(--_radius-bl) + var(--glow-spread, 15px));
  opacity: var(--glow-intensity, 0.4);
  filter: blur(var(--glow-blur, 20px));
  pointer-events: none;
  transition: opacity 0.3s ease, filter 0.3s ease;
  background: conic-gradient(
    from var(--gradient-angle),
    var(--color-1, #4285f4) 0%,
    var(--color-2, #9b72cb) 5%,
    transparent 15%,
    transparent 85%,
    var(--color-3, #d96570) 92%,
    var(--color-1, #4285f4) 100%
  );
}

/* Trace border — sharp beam clipped to border area */
.trace-border-layer {
  position: absolute;
  z-index: 1;
  inset: 0;
  border-radius: var(--_radius);
  border: var(--border-width, 2px) solid transparent;
  pointer-events: none;
  transition: border-width 0.3s ease;
  background:
    linear-gradient(var(--app-bg, #ffffff), var(--app-bg, #ffffff)) padding-box,
    conic-gradient(
      from var(--gradient-angle),
      var(--color-1, #4285f4) 0%,
      var(--color-2, #9b72cb) 4%,
      transparent 12%,
      transparent 88%,
      var(--color-3, #d96570) 94%,
      var(--color-1, #4285f4) 100%
    ) border-box;
}

/* ========================
   HOVER / FOCUS — spin mode
   ======================== */
.ai-input-wrapper[data-gradient-type="spin"]:hover .glow-layer {
  opacity: calc(var(--glow-intensity, 0.4) * 1.5);
  filter: blur(calc(var(--glow-blur, 20px) * 1.3));
}

.ai-input-wrapper[data-gradient-type="spin"]:focus-within .glow-layer {
  opacity: calc(var(--glow-intensity, 0.4) * 2);
  filter: blur(calc(var(--glow-blur, 20px) * 1.5));
}

.ai-input-wrapper[data-gradient-type="spin"]:focus-within .border-layer {
  border-width: calc(var(--border-width, 2px) + 1px);
}

/* ========================
   HOVER / FOCUS — trace mode
   ======================== */
.ai-input-wrapper[data-gradient-type="trace"]:hover .trace-glow-layer {
  opacity: calc(var(--glow-intensity, 0.4) * 1.8);
  filter: blur(calc(var(--glow-blur, 20px) * 1.3));
}

.ai-input-wrapper[data-gradient-type="trace"]:focus-within .trace-glow-layer {
  opacity: calc(var(--glow-intensity, 0.4) * 2.5);
  filter: blur(calc(var(--glow-blur, 20px) * 1.5));
}

.ai-input-wrapper[data-gradient-type="trace"]:focus-within .trace-border-layer {
  border-width: calc(var(--border-width, 2px) + 1px);
}

/* ========================
   HOVER / FOCUS — aurora mode
   ======================== */
.ai-input-wrapper[data-gradient-type="aurora"]:hover .aurora-glow-container {
  opacity: calc(var(--glow-intensity, 0.4) * 1.5) !important;
  filter: blur(calc(var(--glow-blur, 20px) * 1.3)) !important;
}

.ai-input-wrapper[data-gradient-type="aurora"]:focus-within .aurora-glow-container {
  opacity: calc(var(--glow-intensity, 0.4) * 2) !important;
  filter: blur(calc(var(--glow-blur, 20px) * 1.5)) !important;
}

.aurora-glow-container {
  transition: opacity 0.3s ease, filter 0.3s ease;
}
